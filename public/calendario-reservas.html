<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8" />
	<title>Calendario de Reservas</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!-- FullCalendar CSS -->
	<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet" />
	<!-- Bootstrap para el modal y formularios -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="css/calendario-reservas.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

	<style></style>
</head>

<body>
	<!-- BARRA SUPERIOR -->
	<nav class="navbar-superior">
		<div class="navbar-izquierda">
			<button type="button" class="btn-nav" onclick="location.href='estadisticas.html'">📊 Estadísticas
				Reservas</button>
			<button type="button" class="btn-nav" onclick="abrirModalExportar()">📤 Reportes Reservas</button>
			<button type="button" class="btn-nav" onclick="location.href='index.html'">📝 Nueva Reserva</button>
		</div>
		<div class="navbar-derecha">
			<button class="logout-btn" id="btnLogout">🔓 Cerrar sesión</button>
		</div>
	</nav>

	<div class="container">
		<center>
			<h1 id="tituloCalendario">Calendario de Reservas</h1>
		</center>
		<div class="filtros-barra" id="filtroSucursalBarra" style="display:none;">
			<label for="sucursalFiltro">Sucursal:</label>
			<select id="sucursalFiltro"></select>
			<button id="verCalendarioBtn">
				<svg height="18" width="18" viewBox="0 0 20 20" fill="none">
					<rect width="20" height="20" fill="none" />
					<path
						d="M6 2V4M14 2V4M3 8.5H17M5 6H15C16.1046 6 17 6.89543 17 8V16C17 17.1046 16.1046 18 15 18H5C3.89543 18 3 17.1046 3 16V8C3 6.89543 3.89543 3 5 6Z"
						stroke="#fff" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" />
				</svg>
				Ver calendario
			</button>
		</div>

		<div class="input-group mb-4" style="max-width:400px; margin:auto;">
			<input type="text" id="buscadorReservas" class="form-control"
				placeholder="Buscar por RUT, nombre trabajador o empresa..." />
			<span class="input-group-text">
				<svg width="18" height="18" viewBox="0 0 20 20" fill="none">
					<circle cx="9" cy="9" r="7" stroke="#2866c7" stroke-width="2" />
					<line x1="15.1" y1="15.1" x2="18.5" y2="18.5" stroke="#2866c7" stroke-width="2"
						stroke-linecap="round" />
				</svg>
			</span>
		</div>

		<div id="calendar"></div>

		<!-- Modal para el detalle de reserva -->
		<div id="modalReserva" class="modal-reserva">
			<div class="modal-reserva-content">
				<span class="modal-reserva-close" id="cerrarModalReserva">&times;</span>
				<div id="modalDetalleBody"></div>
			</div>
		</div>
		<!-- Modal para editar reserva (formulario avanzado) -->
		<div id="modalEditarReserva" class="modal-reserva" tabindex="-1">
			<div class="modal-reserva-content" style="max-width:900px;">
				<span class="modal-reserva-close" id="cerrarModalEditarReserva">&times;</span>
				<div id="modalEditarBody"></div>
			</div>
		</div>
		<!-- Modal Exportar -->
		<div id="modalExportar" class="modal-reserva">
			<div class="modal-reserva-content" style="max-width:480px;">
				<span class="modal-reserva-close" onclick="cerrarModalExportar()">&times;</span>
				<h4>Exportar reservas a Excel</h4>
				<div class="mt-3">
					<label for="fechaDesde">Desde:</label>
					<input type="date" id="fechaDesde" class="form-control mb-3" />

					<label for="fechaHasta">Hasta:</label>
					<input type="date" id="fechaHasta" class="form-control mb-3" />

					<button class="btn btn-success w-100" onclick="exportarExcel()">Descargar Excel</button>
				</div>
			</div>
		</div>

	</div>

	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales/es.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="js/calendario.js"></script>
</body>

</html>